<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Yash Raghuwanshi ‚Ä¢ Birthday RSVP (31 Aug 2025)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="RSVP for Yash Raghuwanshi's birthday party on 31 August 2025 at Godavari Greens Colony, Vidisha." />
  <style>
    body { font-family: sans-serif; background:#111; color:#eee; display:grid; place-items:center; padding:20px; }
    .card { background:#222; padding:20px; border-radius:12px; max-width:600px; width:100%; }
    label { display:block; margin-top:10px; }
    input,select,textarea { width:100%; padding:8px; margin-top:4px; border-radius:8px; border:1px solid #444; background:#333; color:#eee; }
    button { margin-top:14px; padding:10px 16px; border:none; border-radius:8px; background:#10b981; font-weight:700; cursor:pointer; }
  </style>
</head>
<body>
  <div class="card">
    <h1>üéâ RSVP for Yash‚Äôs Birthday</h1>
    <p>Sun, 31 August 2025 ‚Ä¢ 6:30 PM ‚Ä¢ Godavari Greens Colony, Vidisha</p>
    <form id="rsvpForm">
      <label>Your full name *</label>
      <input name="name" required />

      <label>Are you coming? *</label>
      <select name="status" required>
        <option value="">-- Select --</option>
        <option>Coming</option>
        <option>Not coming</option>
        <option>Maybe</option>
      </select>

      <label>Guests (including you)</label>
      <select name="guests">
        <option>1</option><option>2</option><option>3</option><option>4</option><option>5+</option>
      </select>

      <label>Phone (optional)</label>
      <input name="phone" placeholder="+91..." />

      <label>Message (optional)</label>
      <textarea name="note"></textarea>

      <button type="submit">Submit RSVP</button>
    </form>
    <div id="msg"></div>
  </div>

  <script>
    document.getElementById("rsvpForm").addEventListener("submit", async e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(e.target).entries());
      data.time = new Date().toISOString();

      try {
        const res = await fetch("http://localhost:5000/rsvp", {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify(data)
        });
        const out = await res.json();
        document.getElementById("msg").textContent = out.success ? "‚úÖ Saved to server!" : "‚ö†Ô∏è Error: " + out.error;
      } catch (err) {
        document.getElementById("msg").textContent = "‚ùå Could not reach server.";
      }
    });
  </script>

  <!-- 
  ===========================
  SERVER CODE (server.js)
  ===========================
  Save this part as server.js and run with: 
      npm install express cors body-parser sqlite3
      node server.js
  ---------------------------
  const express = require("express");
  const cors = require("cors");
  const bodyParser = require("body-parser");
  const sqlite3 = require("sqlite3").verbose();

  const app = express();
  const PORT = 5000;

  app.use(cors());
  app.use(bodyParser.json());

  const db = new sqlite3.Database("./rsvps.db");
  db.run(\`CREATE TABLE IF NOT EXISTS rsvps (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT, status TEXT, guests TEXT, phone TEXT, note TEXT, time TEXT
  )\`);

  app.post("/rsvp", (req,res) => {
    const { name, status, guests, phone, note, time } = req.body;
    if(!name || !status) return res.json({success:false, error:"Name and status required"});
    db.run("INSERT INTO rsvps (name,status,guests,phone,note,time) VALUES (?,?,?,?,?,?)",
      [name,status,guests,phone,note,time],
      function(err){ 
        if(err) return res.json({success:false, error:"DB insert failed"});
        res.json({success:true, id:this.lastID});
      });
  });

  app.get("/rsvps", (req,res) => {
    db.all("SELECT * FROM rsvps ORDER BY id DESC", [], (err,rows) => {
      if(err) return res.json({success:false,error:"DB read failed"});
      res.json(rows);
    });
  });

  app.listen(PORT, ()=>console.log("‚úÖ Server running at http://localhost:"+PORT));
  -->
</body>
</html>
